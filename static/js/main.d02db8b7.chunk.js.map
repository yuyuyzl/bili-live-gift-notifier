{"version":3,"sources":["ns9.gif","bubbleLeft.png","bubbleMid.png","bubbleRight.png","App.js","index.js"],"names":["module","exports","live","LiveWS","require","parseInt","URL","window","location","href","searchParams","get","App","useState","giftQueue","setGiftQueue","lastmsg","setLastmsg","transDuration","setTransDuration","showBubble","setShowBubble","undefined","queueTimer","setQueueTimer","log","msg","indexOf","useEffect","length","setTimeout","slice","console","on","data","coin_type","uname","giftName","username","gift_name","user_info","close","className","style","transition","opacity","src","bl","alt","backgroundImage","bm","br","logo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4HAAAA,EAAOC,QAAU,IAA0B,iC,mBCA3CD,EAAOC,QAAU,IAA0B,wC,iBCA3CD,EAAOC,QAAU,8uE,mBCAjBD,EAAOC,QAAU,IAA0B,yC,2RCSrCC,G,MAAK,IAAIC,EAHIC,EAAQ,IAAnBD,QAGcE,SAAS,IAAIC,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,UAAU,WAqEzEC,MAnEf,WAAgB,IAAD,EACkBC,mBAAS,IAD3B,mBACNC,EADM,KACIC,EADJ,OAEcF,mBAAS,IAFvB,mBAENG,EAFM,KAEEC,EAFF,OAG0BJ,mBAAS,IAHnC,mBAGNK,EAHM,KAGQC,EAHR,OAIoBN,oBAAS,GAJ7B,mBAINO,EAJM,KAIKC,EAJL,OAKoBR,wBAASS,GAL7B,mBAKNC,EALM,KAKKC,EALL,KAOPC,EAAI,SAACC,GAETX,GAAa,SAACD,GAAD,OAAuC,IAA1BA,EAAUa,QAAQD,GAAlB,sBAAgCZ,GAAhC,CAA0CY,IAAKZ,MAyC3E,OAtCAc,qBAAU,WAEJL,GAAaT,EAAUe,SACzBV,EAAiB,GACjBE,GAAc,KAEZE,GAAYT,EAAUe,SAExBZ,EAAWH,EAAU,IACrBK,EAAiB,IACjBE,GAAc,GACdG,EAAcM,YAAW,WACvBN,OAAcF,GACXR,EAAUe,OAAO,GAAEd,GAAa,SAAAD,GAAS,OAAEA,EAAUiB,MAAM,QAC9DjB,EAAUe,OAAO,IAAMf,EAAUe,OAAO,SAG5C,CAACf,IAEHc,qBAAU,WAiBR,OAhBAI,QAAQP,IAAI,iBACZvB,EAAK+B,GAAG,QAAQ,kBAAMR,EAAI,iDAE1BvB,EAAK+B,GAAG,QAAQ,WAId/B,EAAK+B,GAAG,aAAa,gBAAEC,EAAF,EAAEA,KAAF,OAA6B,SAAjBA,EAAKC,WAAoB,IAAI7B,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,YAAYc,EAAI,eAAD,OAAMS,EAAKE,MAAX,6BAAsBF,EAAKG,cAEnJnC,EAAK+B,GAAG,aAAa,gBAAEC,EAAF,EAAEA,KAAF,OAAWT,EAAI,eAAD,OAAMS,EAAKI,SAAX,6BAAyBJ,EAAKK,eAEjErC,EAAK+B,GAAG,sBAAsB,gBAAEC,EAAF,EAAEA,KAAF,OAAWT,EAAI,eAAD,OAAMS,EAAKM,UAAUJ,MAArB,+BAKvC,kBAAIlC,EAAKuC,WAChB,IAEA,yBAAKC,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKA,UAAU,WAAWC,MAAO,CAACC,WAAW,OAAD,OAAQ1B,EAAR,KAAyB2B,QAAQzB,EAAW,EAAE,IACxF,yBAAK0B,IAAKC,IAAIC,IAAK,KACnB,yBAAKN,UAAU,gBAAgBC,MAAO,CAACM,gBAAgB,OAAOC,IAAG,MAC9DlC,GAEH,yBAAK8B,IAAKK,IAAIH,IAAK,MAErB,yBAAKF,IAAKM,IAAMV,UAAU,WAAWM,IAAI,YClEjDK,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.d02db8b7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ns9.17b0b4a3.gif\";","module.exports = __webpack_public_path__ + \"static/media/bubbleLeft.2f38f19d.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAADYCAYAAADf2gLeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTE2VDIyOjQzOjU0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTE2VDIyOjQzOjU0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNS0xNlQyMjo0Mzo1NCswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MGRkY2JjNS0xMjlhLWI3NDktYTM0My01MzgxMjlhZmZkOWUiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplZThmMTE3OC05OGI2LWJmNDMtYWQ0Yi0zMDBhY2ZkOGFhOTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5ZDRiZmIzMS00YzgxLTQwNGEtOGM0Zi1jODVjNmM4Yzk4ZDQiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5ZDRiZmIzMS00YzgxLTQwNGEtOGM0Zi1jODVjNmM4Yzk4ZDQiIHN0RXZ0OndoZW49IjIwMjAtMDUtMTZUMjI6NDM6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjBkZGNiYzUtMTI5YS1iNzQ5LWEzNDMtNTM4MTI5YWZmZDllIiBzdEV2dDp3aGVuPSIyMDIwLTA1LTE2VDIyOjQzOjU0KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mNBFMAAAAHNJREFUaIHt2sEJgDAMBdBEOpNbeNABnErHcTOxTiDYQ0Hk/XMfn94CSdZaoyVD02sAAAAA+DHIadmurg0lIrJrAwA8JM9jbZoSP/gHAAAAAAAAAAAAAAAAAAAAAAAAAABep8z72LcBAB5SIqLvfjpbzyRvMS4PEIpIYJ4AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/bubbleRight.346e817a.png\";","import React, {useEffect, useState} from 'react';\nimport logo from './ns9.gif';\nimport bl from './bubbleLeft.png';\nimport bm from './bubbleMid.png';\nimport br from './bubbleRight.png';\nimport './App.css';\nconst { LiveWS } = require('bilibili-live-ws');\n\n\nconst live=new LiveWS(parseInt(new URL(window.location.href).searchParams.get(\"room\"))||21669084);\n\nfunction App() {\n  const [giftQueue,setGiftQueue]=useState([]);\n  const [lastmsg,setLastmsg]=useState(\"\");\n  const [transDuration,setTransDuration]=useState(0.3);\n  const [showBubble,setShowBubble]=useState(false);\n  const [queueTimer,setQueueTimer]=useState(undefined);\n\n  const log=(msg)=>{\n    //console.log(msg);\n    setGiftQueue((giftQueue)=>giftQueue.indexOf(msg)===-1?[...giftQueue,msg]:giftQueue);\n  };\n\n  useEffect(()=>{\n    //console.log(giftQueue);\n    if(!queueTimer&&!giftQueue.length){\n      setTransDuration(1);\n      setShowBubble(false);\n    }\n    if(!queueTimer&&giftQueue.length){\n      //console.log(giftQueue[0]);\n      setLastmsg(giftQueue[0]);\n      setTransDuration(0.3);\n      setShowBubble(true);\n      setQueueTimer(setTimeout(()=>{\n        setQueueTimer(undefined);\n        if(giftQueue.length>0)setGiftQueue(giftQueue=>giftQueue.slice(1));\n      },giftQueue.length?10000/giftQueue.length:10000));\n    }\n    // eslint-disable-next-line\n  },[giftQueue]);\n\n  useEffect(()=>{\n    console.log(\"connecting...\");\n    live.on('open', () => log('已连接到直播间'));\n// Connection is established\n    live.on('live', () => {\n      //live.on('heartbeat', console.log)\n      //live.on('DANMU_MSG', ({info})=>console.log(info[1]));\n      //live.on('SEND_GIFT', ({data})=>(data.coin_type===\"gold\")&&log(data.uname,data.action,data.giftName,data.num));//(data.coin_type===\"gold\")&&\n      live.on('SEND_GIFT', ({data})=> (data.coin_type===\"gold\"||new URL(window.location.href).searchParams.get(\"silver\"))&&log(`感谢${data.uname}前辈的${data.giftName}`));\n      //live.on('GUARD_BUY', ({data}) =>log(data.username,data.gift_name));\n      live.on('GUARD_BUY', ({data}) =>log(`感谢${data.username}前辈的${data.gift_name}`));\n      //live.on('SUPER_CHAT_MESSAGE', ({data}) =>log(data.user_info.uname,data.message,data.price));\n      live.on('SUPER_CHAT_MESSAGE', ({data}) =>log(`感谢${data.user_info.uname}前辈的SC`));\n\n      // live.on('error', console.error);\n      //live.on('msg', console.log);\n    });\n    return ()=>live.close();\n  },[]);\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div className='last-img' style={{transition:`all ${transDuration}s`,opacity:showBubble?1:0}}>\n          <img src={bl} alt={\"\"}/>\n          <div className=\"last-msg text\" style={{backgroundImage:\"url(\"+bm+\")\"}}>\n            {lastmsg}\n          </div>\n          <img src={br} alt={\"\"}/>\n        </div>\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}